<app-topbar></app-topbar>
<app-sidenav></app-sidenav>
<main id="main">
    <mat-progress-bar class="page-loader" color="accent" mode="indeterminate" *ngIf="loading"></mat-progress-bar>
    <div id="dashboard-cards">
        <div fxLayout="row">
            <div fxFlex="0 1 25%">
                <mat-card>
                    <h4>Today's orders</h4>
                    <p class="dashboard-card-value"><mat-icon color="primary">inbox</mat-icon> {{cardsStats.today_orders}}</p>
                </mat-card>
            </div>
            <div fxFlex="0 1 25%">
                <mat-card>
                    <h4>Today's sales</h4>
                    <p class="dashboard-card-value"><mat-icon color="primary">payments</mat-icon> {{cardsStats.today_sale | currency: storeCurrency + ' '}}</p>
                </mat-card>
            </div>
            <div fxFlex="0 1 25%">
                <mat-card>
                    <h4>Total orders</h4>
                    <p class="dashboard-card-value"><mat-icon color="primary">inbox</mat-icon> {{cardsStats.total_orders}}</p>
                </mat-card>
            </div>
            <div fxFlex="0 1 25%">
                <mat-card>
                    <h4>Total sales</h4>
                    <p class="dashboard-card-value"><mat-icon color="primary">payments</mat-icon> {{cardsStats.total_sale | currency: storeCurrency + ' '}}</p>
                </mat-card>
            </div>
        </div>

        <div style="margin-top: 20px;" fxLayout="row">
            <div fxFlex="0 1 25%">
                <mat-card>
                    <h4 fxLayoutAlign="center">Order Analysis</h4>
                    <div fxLayoutAlign="space-between" fxLayout="row">
                        <div  fxLayout="column">
                            <h3>10</h3>
                            <p>Avg Basket size</p>
                        </div>

                        <div fxLayout="column">
                            <h3>466.34</h3>
                            <p>Avg Basket Value</p>
                        </div>
                    </div>
                </mat-card>
            </div>

            <div fxFlex="0 1 75%">
                <mat-card>
                    <h4 fxLayoutAlign="center">Basket Analysis</h4>
                    <div fxLayoutAlign="space-between" fxLayout="row">
                        <div  fxLayout="column">
                            <h4>10</h4>
                            <p>Total Orders</p>
                        </div>

                        <div fxLayout="column">
                            <h4>466.34</h4>
                            <p>Total Cancelled</p>
                        </div>

                        <div fxLayout="column">
                            <h3>466.34</h3>
                            <p>Total Returned</p>
                        </div>
                    </div>
                </mat-card>
            </div>
        </div>
        <div style="margin-top: 20px;" fxLayout="row">
            <div fxFlex="0 1 100%">
                <mat-card>
                    <h4 fxLayoutAlign="center">General Analysis</h4>
                    <div fxLayoutAlign="space-between" fxLayout="row">
                        <div  fxLayout="column">
                            <h3>10</h3>
                            <p>Total Vendors</p>
                        </div>

                        <div fxLayout="column">
                            <h3>466.34</h3>
                            <p>Total Collections</p>
                        </div>

                        <div  fxLayout="column">
                            <h3>10</h3>
                            <p>Total Products</p>
                        </div>

                        <div  fxLayout="column">
                            <h3>10</h3>
                            <p>Total Groups</p>
                        </div>
                    </div>
                </mat-card>
            </div>
        </div>

        <div style="margin-top: 20px;" fxLayout="row">
            <div #containerRef fxFlex="0 1 50%">
                <h4 fxLayoutAlign="center">Top 10 Sold Items</h4>
                    <ngx-charts-pie-chart 
                    [results]="saleData"
                    [legendTitle]="'Product Sale Report'" 
                    [view]="[containerRef.offsetWidth , 400]"
                    [labels]="true" >
                </ngx-charts-pie-chart>


            </div>
            <div #containerRef fxFlex="0 1 50%">
                    <ngx-charts-bar-vertical 
                        [view]="[containerRef.offsetWidth , 400]"
                        [results]="saleData"
                        [xAxisLabel]="'Products'"
                        [legendTitle]="'Product Sale Chart'"
                        [yAxisLabel]="'Sale'"
                        [legend]="true"
                        [showXAxisLabel]="true"
                        [showYAxisLabel]="true"
                        [xAxis]="true"
                        [yAxis]="true"
                        [gradient]="true">
                    </ngx-charts-bar-vertical>

            </div>
        </div>

        <div style="margin-top: 20px;" fxLayout="row">
            <div #containerRef2 fxFlex="0 1 100%">
                <ngx-charts-bar-horizontal
                [view]="[containerRef2.offsetWidth , 400]"
                [results]="saleData"
                [xAxisLabel]="'Products'"
                [legendTitle]="'Product Sale Chart'"
                [yAxisLabel]="'Sale'"
                [legend]="true"
                [showXAxisLabel]="true"
                [showYAxisLabel]="true"
                [xAxis]="true"
                [yAxis]="true"
                [gradient]="true">
                    </ngx-charts-bar-horizontal>
            </div>
        </div>
    </div>
</main>
